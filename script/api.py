#-*- coding:utf-8 -*-
import os
import openai

openai.api_key = "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"

# Note: you need to be using OpenAI Python v0.27.0 for the code below to work
mess = []
# prompt ="根据以下例子：\n给定创建流程图的原始文字:\n制作交流输入电源线在AC/DC端的3-pin圆形连接器\n预留做线端的长度，绑扎塑料线扣，然后将螺母、套筒一起套在电缆上并略微拧紧，如图2所示。\n根据量取的长度，剥去待连接电缆头部的外护套及每根芯线的外护套，如图3所示。\n禁止电源线极性反接，电源线极性反接可能会造成设备功能异常、意外伤害，上电前请务必检查电源线极性连接正确。\n剥去电源线外护套时不要割破电源线芯线的保护套。\n电缆芯线装配完成，用手轻拉每根芯线，检查芯线是否被夹紧。如果电缆有退位或芯线露出外壳接线孔口，应取出电缆并剪断散丝芯线重新剥线和接线。\n将套筒与壳体用手拧紧，直至套筒上红色标线看不见，表示套筒与壳体连接到位，如图5所示。\n将螺母与套筒预紧，再用两用扳手（开口28mm）进一步紧固螺母，如图6所示。\n用万用表检测电缆组件加工可靠性。\n如果设备用于室外，连接器则需缠绕三层绝缘胶带进行保护，如图7所示。\n\n以下是流程图的所有节点，其中key是节点编号，value是节点内容:\n{'0': ['操作者', '长度', '预留'], '1': ['操作者', '塑料线扣', '绑扎'], '2': ['螺母', '电缆', '套在'], '3': ['套筒', '电缆', '套在'], '4': ['操作者', '螺母', '拧紧'], '5': ['操作者', '套筒', '拧紧'], '6': ['操作者', '长度', '量取'], '7': ['操作者', '外护套', '剥去'], '8': ['操作者', '外护套', '剥去'], '9': ['操作者', '电源线极性', '检查'], '10': ['操作者', '电源线外护套', '剥去'], '11': ['操作者', '电缆芯线', '装配'], '12': ['操作者', '芯线', '轻拉'], '13': ['操作者', '芯线', '夹紧'], '14': ['操作者', '电缆', '取出'], '15': ['操作者', '散丝芯线', '剪断'], '16': ['操作者', '散丝芯线', '剥线和接线'], '17': ['操作者', '套筒', '拧紧'], '18': ['操作者', '壳体', '拧紧'], '19': ['套筒', '壳体', '连接'], '20': ['操作者', '螺母', '预紧'], '21': ['操作者', '套筒', '预紧'], '22': ['操作者', '两用扳手', '用'], '23': ['操作者', '裸压接端子“A”', '紧固'], '24': ['操作者', '万用表', '用'], '25': ['操作者', '电缆组件加工可靠性', '检测'], '26': ['设备', '室外', '用于'], '27': ['操作者', '绝缘胶带', '缠绕'], '[start]': ['[PAD]', '[PAD]', '[PAD]'], '[end]': ['[PAD]', '[PAD]', '[PAD]']}\n\n其中有一个节点与原始文字不符，错误的节点编号是：23\n回答问题：\n给定创建流程图的原始文字:\nDBS3900安装APM30H（Ver.B）\n将FE/GE网线穿过出线袋或者出线模块进入机柜\n在距离出线袋（APM30H（Ver.D）机柜、APM30H（Ver.E）机柜、APM5930机柜）300mm处或者在距离机柜出线口1m以内的合适位置（APM30H（Ver.C）和APM30H（Ver.B）机柜），剥掉FE/GE网线外皮50mm左右，露出屏蔽层。\n将FE/GE网线穿过接地夹，使屏蔽层和接地夹充分接触，拧紧接地夹上的M4螺钉，紧固力矩为1.2N·m。\n如果配置的是UMPTe/GTMUc单板，将FE/GE网线的一端连接到UMPTe/GTMUc单板上的“FE/GE0”或“FE/GE2”接口，如下图所示。\n如果配置的是除UMPTe/GTMUc以外的其他传输板，将FE/GE网线的一端连接到UFLP单板“OUTSIDE”侧的“FE0”（“FE/GE0”）或“FE1”（“FE/GE1”）接口上，如下图所示。\n将FE/GE网线的另一端连接至外部传输设备。\n按规范布放线缆，请参见1.7.1 线缆布放要求。\n请参见安装刀型工程标签，在安装的线缆上粘贴标签。\n\n以下是流程图的所有节点，其中key是节点编号，value是节点内容:\n{'0': ['FE/GE网线', '出线袋', '以适当的力量（约60N）向外拔'], '1': ['操作者', 'FE/GE网线外皮', '剥掉'], '2': ['FE/GE网线', '接地夹', '穿过'], '3': ['屏蔽层', '接地夹', '充分接触'], '4': ['操作者', 'M4螺钉', '拧紧'], '5': ['FE/GE网线', '“FE/GE0”或“FE/GE2”接口', '连接'], '6': ['FE/GE网线', '“FE0”（“FE/GE0”）', '连接'], '7': ['FE/GE网线', '“FE1”（“FE/GE1”）接口', '连接'], '8': ['FE/GE网线', '外部传输设备', '连接'], '9': ['操作者', '线缆', '布放'], '10': ['操作者', '标签', '粘贴'], '[start]': ['[PAD]', '[PAD]', '[PAD]'], '[end]': ['[PAD]', '[PAD]', '[PAD]']}\n\n其中有一个节点与原始文字不符，请给出错误的节点编号："
# prompt = "根据以下例子：\n给定创建流程图的原始文字:\n制作交流输入电源线在AC/DC端的3-pin圆形连接器\n预留做线端的长度，绑扎塑料线扣，然后将螺母、套筒一起套在电缆上并略微拧紧，如图2所示。\n根据量取的长度，剥去待连接电缆头部的外护套及每根芯线的外护套，如图3所示。\n禁止电源线极性反接，电源线极性反接可能会造成设备功能异常、意外伤害，上电前请务必检查电源线极性连接正确。\n剥去电源线外护套时不要割破电源线芯线的保护套。\n电缆芯线装配完成，用手轻拉每根芯线，检查芯线是否被夹紧。如果电缆有退位或芯线露出外壳接线孔口，应取出电缆并剪断散丝芯线重新剥线和接线。\n将套筒与壳体用手拧紧，直至套筒上红色标线看不见，表示套筒与壳体连接到位，如图5所示。\n将螺母与套筒预紧，再用两用扳手（开口28mm）进一步紧固螺母，如图6所示。\n用万用表检测电缆组件加工可靠性。\n如果设备用于室外，连接器则需缠绕三层绝缘胶带进行保护，如图7所示。\n\n以下是流程图的所有节点，其中key是节点编号，value是节点内容:\n其中有一个节点与原始文字不符，错误的节点编号是：23\n回答问题：\n给定创建流程图的原始文字:\ndbs-ins-59-ibc10\n将机柜平躺在地面上。\n在机柜底部对应的孔位安装四个脚垫，根据需要的机柜高度调节M16调节螺母，同时将M12锁紧螺母预拧紧至机柜底部约1mm缝隙。\n用水平尺和铅锤仪分别检查机柜的水平度和垂直度。\n如果机柜不平，用套筒扳手调节调平螺栓。\n机柜调平后，用力矩扳手紧固4个膨胀螺栓至45N·m。\n根据划线模板上的定位孔确定机柜安装孔位，如下图所示。\n选择钻头Ф16，用冲击钻在定位点处打孔，打孔深度55mm～60mm。\n使用吸尘器将所有孔位内部、外部的灰尘清除干净，再对孔距进行测量，对于误差较大的孔需重新定位、打孔。\n将膨胀螺栓略微拧紧，然后垂直放入孔中。\n用橡胶锤敲击膨胀螺栓，直至膨胀管全部进入孔内。\n依次取出M12x60螺栓、弹垫和平垫。\n将机柜放在规划好的位置，使机柜安装孔对准膨胀螺栓的孔位。\n在机柜下面前后分别推入一块绝缘板，确保缺口朝内并卡入膨胀螺栓。\n将弹垫、平垫、绝缘垫套入四个膨胀螺栓中，将四个膨胀螺栓垂直穿过机柜的下围框，插入膨胀管，并与膨胀管拧紧。\n用水平尺和铅锤仪分别检查机柜的水平度和垂直度。\n如果机柜不平，用套筒扳手调节调平螺栓。\n机柜调平后，用力矩扳手紧固4个膨胀螺栓至45N·m。\n调万用表至兆欧姆档（MΩ）。\n若阻值小于5MΩ，说明机柜与大地没有绝缘，转5.c。\n若阻值大于等于5MΩ，说明机柜与大地已绝缘，结束测量。\n若是，则重新安装并调平底座。\n若否，则检查万用表是否故障，设置是否正确。\n以下是流程图的所有节点，其中key是节点编号，value是节点内容:\n{'0': ['操作者', '脚垫', '安装'], '1': ['操作者', 'M16调节螺母', '调节'], '2': ['操作者', 'M12锁紧螺母', '预拧紧'], '3': ['操作者', '水平尺', '用'], '4': ['操作者', '铅锤仪', '用'], '5': ['操作者', '水平度', '检查'], '6': ['操作者', '垂直度', '检查'], '7': ['操作者', '套筒扳手', '用'], '8': ['操作者', '调平螺栓', '调节'], '9': ['操作者', '力矩扳手', '外翻'], '10': ['操作者', '膨胀螺栓', '紧固'], '11': ['操作者', '机柜安装孔位', '确定'], '12': ['操作者', '钻头Ф16', '选择'], '13': ['操作者', '冲击钻', '用'], '14': ['操作者', '孔', '打'], '15': ['操作者', '吸尘器', '使用'], '16': ['操作者', '灰尘', '清除干净'], '17': ['操作者', '孔距', '测量'], '18': ['操作者', '孔', '重新定位、打'], '19': ['操作者', '膨胀螺栓', '略微拧紧'], '20': ['膨胀螺栓', '孔中', '垂直放入'], '21': ['操作者', '橡胶锤', '用'], '22': ['操作者', '膨胀螺栓', '敲击'], '23': ['膨胀管', '孔内', '进入'], '24': ['操作者', 'M12x60螺栓、弹垫和平垫', '依次取出'], '25': ['机柜安装孔', '孔位', '对准'], '26': ['操作者', '绝缘板', '推入'], '27': ['操作者', '膨胀螺栓', '卡入'], '28': ['弹垫、平垫、绝缘垫', '膨胀螺栓', '套入'], '29': ['膨胀螺栓', '下围框', '垂直穿过'], '30': ['操作者', '膨胀管', '插入'], '31': ['操作者', '膨胀管', '拧紧'], '32': ['操作者', '水平尺', '用'], '33': ['操作者', '铅锤仪', '用'], '34': ['操作者', '水平度', '检查'], '35': ['操作者', '垂直度', '检查'], '36': ['操作者', '套筒扳手', '用'], '37': ['操作者', '调平螺栓', '调节'], '38': ['操作者', '力矩扳手', '用'], '39': ['操作者', '膨胀螺栓', '紧固'], '40': ['操作者', '万用表', '调'], '41': ['操作者', '底座', '重新安装并调平'], '42': ['操作者', '万用表', '检查'], '[start]': ['[PAD]', '[PAD]', '[PAD]'], '[end]': ['[PAD]', '[PAD]', '[PAD]']}\n\n其中有一个节点与原始文字不符，请给出错误的节点编号："
prompt = "给定创建流程图的原始文字:\ndbs-ins-59-ibc10\n将机柜平躺在地面上。\n在机柜底部对应的孔位安装四个脚垫，根据需要的机柜高度调节M16调节螺母，同时将M12锁紧螺母预拧紧至机柜底部约1mm缝隙。\n用水平尺和铅锤仪分别检查机柜的水平度和垂直度。\n如果机柜不平，用套筒扳手调节调平螺栓。\n机柜调平后，用力矩扳手紧固4个膨胀螺栓至45N·m。\n根据划线模板上的定位孔确定机柜安装孔位，如下图所示。\n选择钻头Ф16，用冲击钻在定位点处打孔，打孔深度55mm～60mm。\n使用吸尘器将所有孔位内部、外部的灰尘清除干净，再对孔距进行测量，对于误差较大的孔需重新定位、打孔。\n将膨胀螺栓略微拧紧，然后垂直放入孔中。\n用橡胶锤敲击膨胀螺栓，直至膨胀管全部进入孔内。\n依次取出M12x60螺栓、弹垫和平垫。\n将机柜放在规划好的位置，使机柜安装孔对准膨胀螺栓的孔位。\n在机柜下面前后分别推入一块绝缘板，确保缺口朝内并卡入膨胀螺栓。\n将弹垫、平垫、绝缘垫套入四个膨胀螺栓中，将四个膨胀螺栓垂直穿过机柜的下围框，插入膨胀管，并与膨胀管拧紧。\n用水平尺和铅锤仪分别检查机柜的水平度和垂直度。\n如果机柜不平，用套筒扳手调节调平螺栓。\n机柜调平后，用力矩扳手紧固4个膨胀螺栓至45N·m。\n调万用表至兆欧姆档（MΩ）。\n若阻值小于5MΩ，说明机柜与大地没有绝缘，转5.c。\n若阻值大于等于5MΩ，说明机柜与大地已绝缘，结束测量。\n若是，则重新安装并调平底座。\n若否，则检查万用表是否故障，设置是否正确。\n以下是流程图的所有节点，其中key是节点编号，value是节点内容:\n{'0': ['操作者', '脚垫', '安装'], '1': ['操作者', 'M16调节螺母', '调节'], '2': ['操作者', 'M12锁紧螺母', '预拧紧'], '3': ['操作者', '水平尺', '用'], '4': ['操作者', '铅锤仪', '用'], '5': ['操作者', '水平度', '检查'], '6': ['操作者', '垂直度', '检查'], '7': ['操作者', '套筒扳手', '用'], '8': ['操作者', '调平螺栓', '调节'], '9': ['操作者', '力矩扳手', '外翻'], '10': ['操作者', '膨胀螺栓', '紧固'], '11': ['操作者', '机柜安装孔位', '确定'], '12': ['操作者', '钻头Ф16', '选择'], '13': ['操作者', '冲击钻', '用'], '14': ['操作者', '孔', '打'], '15': ['操作者', '吸尘器', '使用'], '16': ['操作者', '灰尘', '清除干净'], '17': ['操作者', '孔距', '测量'], '18': ['操作者', '孔', '重新定位、打'], '19': ['操作者', '膨胀螺栓', '略微拧紧'], '20': ['膨胀螺栓', '孔中', '垂直放入'], '21': ['操作者', '橡胶锤', '用'], '22': ['操作者', '膨胀螺栓', '敲击'], '23': ['膨胀管', '孔内', '进入'], '24': ['操作者', 'M12x60螺栓、弹垫和平垫', '依次取出'], '25': ['机柜安装孔', '孔位', '对准'], '26': ['操作者', '绝缘板', '推入'], '27': ['操作者', '膨胀螺栓', '卡入'], '28': ['弹垫、平垫、绝缘垫', '膨胀螺栓', '套入'], '29': ['膨胀螺栓', '下围框', '垂直穿过'], '30': ['操作者', '膨胀管', '插入'], '31': ['操作者', '膨胀管', '拧紧'], '32': ['操作者', '水平尺', '用'], '33': ['操作者', '铅锤仪', '用'], '34': ['操作者', '水平度', '检查'], '35': ['操作者', '垂直度', '检查'], '36': ['操作者', '套筒扳手', '用'], '37': ['操作者', '调平螺栓', '调节'], '38': ['操作者', '力矩扳手', '用'], '39': ['操作者', '膨胀螺栓', '紧固'], '40': ['操作者', '万用表', '调'], '41': ['操作者', '底座', '重新安装并调平'], '42': ['操作者', '万用表', '检查'], '[start]': ['[PAD]', '[PAD]', '[PAD]'], '[end]': ['[PAD]', '[PAD]', '[PAD]']}\n\n其中有一个节点与原始文字不符，请给出错误的节点编号："


mess.append({"role": "system", "content": "You are a helpful assistant."})
mess.append({"role": "user", "content": prompt})

response = openai.Completion.create(
  model="text-davinci-003", #text-curie-001
  prompt=prompt
)

print(response)
# print("\u8fd9\u91cc\u6ca1\u6709\u63d0\u4f9b\u6b63\u786e\u7684\u9009\u9879\uff0c\u9700\u8981\u63d0\u4f9b\u6b63\u786e\u9009\u9879\u624d\u80fd\u5224\u65ad\u54ea\u4e2a\u662f\u6b63\u786e\u7684\u3002")
# print(response['choices'][0]['message']['content'])
print(response['choices'][0]['text'])